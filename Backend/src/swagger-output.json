{
  "openapi": "3.0.0",
  "info": {
    "title": "Interview Daily API",
    "description": "Interview Daily API 명세서입니다.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3000/"
    }
  ],
  "paths": {
    "/oauth2/login/google": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "구글 로그인 시작",
        "description": "구글 OAuth2 인증 페이지로 리다이렉트합니다.",
        "responses": {
          "200": {
            "description": "OK"
          },
          "302": {
            "description": "구글 로그인 페이지로 이동"
          }
        }
      }
    },
    "/oauth2/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "로그아웃",
        "description": "현재 세션을 종료하고 메인 페이지로 리다이렉트합니다.",
        "responses": {
          "200": {
            "description": "OK"
          },
          "302": {
            "description": "로그아웃 성공 후 메인으로 이동"
          },
          "401": {
            "description": "로그인하지 않은 사용자"
          }
        }
      }
    },
    "/api/users/me": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "내 정보 조회",
        "description": "현재 로그인된 사용자의 정보를 반환합니다. (세션 쿠키 필요)",
        "responses": {
          "200": {
            "description": "조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "resultType": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "error": {},
                    "success": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "1"
                        },
                        "email": {
                          "type": "string",
                          "example": "user@example.com"
                        },
                        "name": {
                          "type": "string",
                          "example": "이름"
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              },
              "application/xml": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "resultType": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "error": {},
                    "success": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "1"
                        },
                        "email": {
                          "type": "string",
                          "example": "user@example.com"
                        },
                        "name": {
                          "type": "string",
                          "example": "이름"
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              }
            }
          },
          "401": {
            "description": "로그인하지 않음 (세션 만료)"
          }
        }
      }
    },
    "/api/question-sets/": {
      "get": {
        "tags": [
          "QuestionSet"
        ],
        "summary": "질문 세트 목록 조회",
        "description": "사용자가 생성한 모든 질문 세트 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "tags": [
          "QuestionSet"
        ],
        "summary": "질문 세트 생성",
        "description": "새로운 질문 세트를 생성합니다.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "질문 세트 정보",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "example": "CS 면접 대비"
                },
                "category": {
                  "type": "string",
                  "example": "CS"
                },
                "description": {
                  "type": "string",
                  "example": "운영체제, 네트워크 위주"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/question-sets/{setId}/questions": {
      "get": {
        "tags": [
          "QuestionSet"
        ],
        "summary": "세트 내 질문 목록 조회",
        "description": "특정 질문 세트에 포함된 질문들을 조회합니다.",
        "parameters": [
          {
            "name": "setId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "질문 세트 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "tags": [
          "QuestionSet"
        ],
        "summary": "질문 추가",
        "description": "특정 질문 세트에 새로운 질문을 추가합니다.",
        "parameters": [
          {
            "name": "setId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "질문 세트 ID"
          },
          {
            "name": "body",
            "in": "body",
            "description": "질문 내용",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "content": {
                  "type": "string",
                  "example": "프로세스와 스레드의 차이는 무엇인가요?"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/question-sets/{setId}": {
      "patch": {
        "tags": [
          "QuestionSet"
        ],
        "summary": "질문 세트 수정",
        "description": "질문 세트의 제목이나 설명을 수정합니다.",
        "parameters": [
          {
            "name": "setId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "질문 세트 ID"
          },
          {
            "name": "body",
            "in": "body",
            "description": "수정할 내용",
            "schema": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "example": "수정된 제목"
                },
                "description": {
                  "type": "string",
                  "example": "수정된 설명"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "tags": [
          "QuestionSet"
        ],
        "summary": "질문 세트 삭제",
        "description": "질문 세트와 포함된 모든 질문을 삭제합니다.",
        "parameters": [
          {
            "name": "setId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "질문 세트 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/question-sets/{setId}/questions/{questionId}": {
      "patch": {
        "tags": [
          "QuestionSet"
        ],
        "summary": "질문 수정",
        "description": "세트 내의 특정 질문 내용을 수정합니다.",
        "parameters": [
          {
            "name": "setId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "질문 세트 ID"
          },
          {
            "name": "questionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "질문 ID"
          },
          {
            "name": "body",
            "in": "body",
            "description": "수정할 질문 내용",
            "schema": {
              "type": "object",
              "properties": {
                "content": {
                  "type": "string",
                  "example": "수정된 질문 내용"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "tags": [
          "QuestionSet"
        ],
        "summary": "질문 삭제",
        "description": "세트 내의 특정 질문 하나를 삭제합니다.",
        "parameters": [
          {
            "name": "setId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "질문 세트 ID"
          },
          {
            "name": "questionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "질문 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/feedback-templates/": {
      "get": {
        "tags": [
          "FeedbackTemplate"
        ],
        "summary": "피드백 템플릿 전체 조회",
        "description": "모든 카테고리의 피드백 템플릿 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "resultType": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "success": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "number",
                            "example": 1
                          },
                          "category": {
                            "type": "string",
                            "example": "CS"
                          },
                          "content": {
                            "type": "string",
                            "example": "..."
                          }
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              },
              "application/xml": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "resultType": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "success": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "number",
                            "example": 1
                          },
                          "category": {
                            "type": "string",
                            "example": "CS"
                          },
                          "content": {
                            "type": "string",
                            "example": "..."
                          }
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/feedback-templates/{category}": {
      "get": {
        "tags": [
          "FeedbackTemplate"
        ],
        "summary": "카테고리별 템플릿 조회",
        "description": "",
        "parameters": [
          {
            "name": "category",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "조회할 템플릿 카테고리 (예: CS, BE, FE)"
          }
        ],
        "responses": {
          "200": {
            "description": "조회 성공"
          }
        }
      },
      "patch": {
        "tags": [
          "FeedbackTemplate"
        ],
        "summary": "피드백 템플릿 수정",
        "description": "특정 카테고리의 피드백 템플릿 내용을 수정합니다.",
        "parameters": [
          {
            "name": "category",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "수정할 템플릿 카테고리"
          },
          {
            "name": "body",
            "in": "body",
            "description": "수정할 템플릿 데이터",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "content": {
                  "type": "string",
                  "example": "수정된 템플릿 내용입니다."
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "수정 성공"
          }
        }
      }
    },
    "/api/history/interviews": {
      "get": {
        "tags": [
          "History"
        ],
        "summary": "면접 기록 조회 (커서 페이징)",
        "description": "사용자의 지난 면접 기록을 조회합니다. 무한 스크롤을 위한 커서 기반 페이징을 지원합니다.",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "한 번에 가져올 항목 수 (기본값: 20)",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "cursorCreatedAt",
            "in": "query",
            "description": "페이징 커서: 마지막으로 조회된 면접의 생성일시 (ISO String)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "cursorId",
            "in": "query",
            "description": "페이징 커서: 마지막으로 조회된 면접의 ID (중복 방지용)",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "resultType": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "success": {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "number",
                                "example": 1
                              },
                              "createdAt": {
                                "type": "string",
                                "example": "2023-12-01T09:00:00.000Z"
                              },
                              "totalScore": {
                                "type": "number",
                                "example": 85
                              },
                              "questionCount": {
                                "type": "number",
                                "example": 5
                              }
                            }
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "nextCursorCreatedAt": {
                              "type": "string",
                              "example": "2023-11-30T09:00:00.000Z"
                            },
                            "nextCursorId": {
                              "type": "number",
                              "example": 5
                            },
                            "hasNext": {
                              "type": "boolean",
                              "example": true
                            }
                          }
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              },
              "application/xml": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "resultType": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "success": {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "number",
                                "example": 1
                              },
                              "createdAt": {
                                "type": "string",
                                "example": "2023-12-01T09:00:00.000Z"
                              },
                              "totalScore": {
                                "type": "number",
                                "example": 85
                              },
                              "questionCount": {
                                "type": "number",
                                "example": 5
                              }
                            }
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "nextCursorCreatedAt": {
                              "type": "string",
                              "example": "2023-11-30T09:00:00.000Z"
                            },
                            "nextCursorId": {
                              "type": "number",
                              "example": 5
                            },
                            "hasNext": {
                              "type": "boolean",
                              "example": true
                            }
                          }
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/interviews/start": {
      "post": {
        "tags": [
          "Interview"
        ],
        "summary": "면접 시작",
        "description": "새로운 면접 세션을 생성하고 첫 번째 질문 세트를 할당합니다.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "면접 설정",
            "required": false,
            "schema": {
              "type": "object",
              "properties": {
                "strategy": {
                  "type": "string",
                  "example": "random"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "201": {
            "description": "면접 생성 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "resultType": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "success": {
                      "type": "object",
                      "properties": {
                        "interview": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "1"
                            },
                            "userId": {
                              "type": "string",
                              "example": "1"
                            },
                            "questionSetId": {
                              "type": "string",
                              "example": "1"
                            },
                            "answers": {
                              "type": "array",
                              "example": [],
                              "items": {}
                            }
                          }
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              },
              "application/xml": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "resultType": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "success": {
                      "type": "object",
                      "properties": {
                        "interview": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "1"
                            },
                            "userId": {
                              "type": "string",
                              "example": "1"
                            },
                            "questionSetId": {
                              "type": "string",
                              "example": "1"
                            },
                            "answers": {
                              "type": "array",
                              "example": [],
                              "items": {}
                            }
                          }
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/interviews/{interviewId}/": {
      "get": {
        "tags": [
          "Interview"
        ],
        "summary": "면접 상세 정보 조회",
        "description": "",
        "parameters": [
          {
            "name": "interviewId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "면접 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/interviews/{interviewId}/answers": {
      "get": {
        "tags": [
          "Interview"
        ],
        "summary": "면접 답변 목록 조회",
        "description": "특정 면접의 모든 질문과 사용자의 답변(오디오 URL, STT 결과 포함)을 조회합니다.",
        "parameters": [
          {
            "name": "interviewId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "면접 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "1"
                    },
                    "userId": {
                      "type": "string",
                      "example": "1"
                    },
                    "questionSetId": {
                      "type": "string",
                      "example": "1"
                    },
                    "answers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "1"
                          },
                          "interviewId": {
                            "type": "string",
                            "example": "1"
                          },
                          "questionId": {
                            "type": "string",
                            "example": "1"
                          },
                          "sequence": {
                            "type": "number",
                            "example": 1
                          },
                          "questionContent": {
                            "type": "string",
                            "example": "질문 내용"
                          },
                          "audioUrl": {
                            "type": "string",
                            "example": "https://..."
                          },
                          "transcriptText": {
                            "type": "string",
                            "example": "답변 내용"
                          },
                          "createdAt": {
                            "type": "string",
                            "example": "2023-01-01T00:00:00Z"
                          },
                          "updatedAt": {
                            "type": "string",
                            "example": "2023-01-01T00:00:00Z"
                          }
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              },
              "application/xml": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "1"
                    },
                    "userId": {
                      "type": "string",
                      "example": "1"
                    },
                    "questionSetId": {
                      "type": "string",
                      "example": "1"
                    },
                    "answers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "1"
                          },
                          "interviewId": {
                            "type": "string",
                            "example": "1"
                          },
                          "questionId": {
                            "type": "string",
                            "example": "1"
                          },
                          "sequence": {
                            "type": "number",
                            "example": 1
                          },
                          "questionContent": {
                            "type": "string",
                            "example": "질문 내용"
                          },
                          "audioUrl": {
                            "type": "string",
                            "example": "https://..."
                          },
                          "transcriptText": {
                            "type": "string",
                            "example": "답변 내용"
                          },
                          "createdAt": {
                            "type": "string",
                            "example": "2023-01-01T00:00:00Z"
                          },
                          "updatedAt": {
                            "type": "string",
                            "example": "2023-01-01T00:00:00Z"
                          }
                        }
                      }
                    }
                  },
                  "xml": {
                    "name": "main"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/interviews/{interviewId}/feedbacks": {
      "post": {
        "tags": [
          "Interview"
        ],
        "summary": "피드백 제출",
        "description": "면접이 끝난 후, 사용자가 스스로 평가한 피드백 점수와 코멘트를 저장합니다.",
        "parameters": [
          {
            "name": "interviewId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "면접 ID"
          },
          {
            "name": "body",
            "in": "body",
            "description": "피드백 데이터 목록",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "feedbacks": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "answerId": {
                        "type": "number",
                        "example": 2
                      },
                      "score": {
                        "type": "number",
                        "example": 3
                      },
                      "comment": {
                        "type": "string",
                        "example": "보통임"
                      }
                    }
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/interviews/{interviewId}/answers/{answerId}/audio": {
      "post": {
        "tags": [
          "Interview"
        ],
        "summary": "답변 오디오 업로드",
        "description": "특정 질문에 대한 사용자의 음성 답변 파일을 업로드합니다.",
        "parameters": [
          {
            "name": "interviewId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "면접 ID"
          },
          {
            "name": "answerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "답변(질문) ID"
          },
          {
            "name": "file",
            "in": "formData",
            "required": true,
            "description": "업로드할 오디오 파일 (mp3, wav, m4a 등)",
            "schema": {
              "type": "file"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/interviews/{interviewId}/complete": {
      "post": {
        "tags": [
          "Interview"
        ],
        "summary": "면접 종료",
        "description": "면접 상태를 완료(COMPLETED)로 변경합니다.",
        "parameters": [
          {
            "name": "interviewId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "면접 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  }
}